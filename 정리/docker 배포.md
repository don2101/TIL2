- 소스코드를 삽입하고 나서 배포할 것
  - nginx등이 연결될 때 소스가 없으면 에러가 날 수 있고 
  - 원격 저장소에서 가져오려면 느리다.
- ci
- (소스코드가 삽입된) 이미지 생성 => install, lint, test => build => 빌드 결과물 실행 => 생성된 이미지 push
- cd
- push된 이미지 받아서 설정 및 실행
- 설정파일은  volume으로 주입
- 도커 이미지 생성 시기와 컨테이너로 올리는 시기를 구분
- 이미지에서 설정파일 바운딩 등 배포 실행에 필요한 틀을 미리 다 만들어 놓고 시작
  - 소스코드만 삽입하면 실행되는 틀
    - 배포용, 개발용 등 사용 마다 모두 만드는 것이 좋다
  - 소스파일 업데이트 마다 버전 업



1. 소스코드 변경
2. dev에 push
3. deploy에서 dev를 merge
4. 배포서버에서 deploy를 가져온다
5. 기존 이미지(혹은 새로운 기반 이미지)에 소스코드를 추가하여 docker build. 새로운 버전의 이미지 생성
6. 기존 컨테이너 내리고 새로운 컨테이너 배포
   - 기존 컨테이너 데이터 보존?



- static은 nginx등의 서버에서도 연결을 시켜줘야 한다.